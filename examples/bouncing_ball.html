<!DOCTYPE HTML>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Visual.js - Bouncing ball</title>
  <script type="text/javascript" src="../build/Visual.js"></script>
  <style type="text/css">
    body {
      background: #000;
      color: #eee;
      margin: 0px;
      overflow: hidden;
    }
    #info {
      position: absolute;
      top: 20px;
      width: 100%;
      text-align: center;
    }
  </style>
</head>
<body>
  <div id="info"> Press w/a/s/d to rotate, z/x to zoom </div>

  <script type="text/javascript">

    var scene = Visual({
      container: document.body,
      width: window.innerWidth,
      height: window.innerHeight,
    });

    var box = scene.box({
      pos: [0, 0, 0],
      length: 4,
      height: 0.5,
      width: 4,
      color: 0xdddddd
    });

    var ball = scene.sphere({
      pos: [0, 4, 0],
      radius: 1,
      color: 0xff0000
    });

    var velocity = new THREE.Vector3(0, -1, 0);

    var dt = 1.0 / 60;

    function step() {
      ball.pos.addSelf(
        velocity.clone().multiplyScalar(dt)
      );
      if (ball.y < ball.radius) {
        velocity.y = Math.abs(velocity.y);
      } else {
        velocity.y = velocity.y - 9.8 * dt;
      }
    };

    setInterval(step, dt * 1000);

  </script>
</body>
</html>
