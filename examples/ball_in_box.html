<!DOCTYPE HTML>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Visual.js - Ball in Box</title>
  <script type="text/javascript" src="../build/Visual.js"></script>
  <style type="text/css">
    body {
      background: #000;
      color: #eee;
      overflow: hidden;
    }
    #info {
      width: 300px;
      position: absolute;
      left: 50%;
      margin-left: -150px;
      margin-top: 20px;
      text-align: center;
    }
  </style>
</head>
<body>
  <div id="info"> Press w/a/s/d to rotate, z/x to zoom </div>
  <div id="container"></div>

  <script type="text/javascript">

    var scene = Visual({
      container: document.body,
      width: window.innerWidth,
      height: window.innerHeight
    });

    var ball = scene.sphere({
      pos: [0, 0, 0],
      color: 0xff0000,
      radius: 1,
    });

    var bounding = 50;

    var right = scene.box({
      length: 1,
      width: bounding,
      height: bounding,
      pos: [bounding / 2, 0, 0]
    });
    var left = scene.box({
      length: 1,
      width: bounding,
      height: bounding,
      pos: [-bounding / 2, 0, 0]
    });
    var top = scene.box({
      length: bounding,
      width: bounding,
      height: 1,
      pos: [0, bounding / 2, 0]
    });
    var bottom = scene.box({
      length: bounding,
      width: bounding,
      height: 1,
      pos: [0, -bounding / 2, 0]
    });
    var back = scene.box({
      length: bounding,
      width: 1,
      height: bounding,
      pos: [0, 0, -bounding / 2]
    });

    var velocity = new THREE.Vector3(Math.random(), Math.random(), Math.random());
    var dt = 0.01;
    var limit = bounding / 2 - 0.5;

    function step() {
      ball.pos.addSelf(velocity);
      if (Math.abs(ball.pos.x) > limit) {
        velocity.x = -velocity.x;
      }
      if (Math.abs(ball.pos.y) > limit) {
        velocity.y = -velocity.y;
      }
      if (Math.abs(ball.pos.z) > limit) {
        velocity.z = -velocity.z;
      }
    }

    setInterval(step, dt * 1000);

  </script>
</body>
</html>
